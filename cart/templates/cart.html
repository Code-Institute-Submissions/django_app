{% extends 'base.html' %}
{% load mathfilters %}
{% load static from staticfiles %}
{% load bootstrap_tags %}
{% block form %}
<h1>Your Cart</h1>
{% if total != 0 %}
{% if cart_items == '[]' %}
<h1>empty</h1>
{% endif %}
<div class="card mt-5">
  <div class="card-header jenter">
    <h4>Summary</h4>
  </div>
  <div class="card-body ">
    <table class='table table-small '>
      <tr class='bottom-border'>
        <th>Your items</th>
        <th>Number of votes</th>
        <th>Price</th>
        <th>Action</th>
      </tr>
      {% for item in cart_items %}
      <tr>
        <td><a href=" {% url 'get_bug_detail' item.ticket.id %}">{{item.ticket.title}} </a></td>
        <td> {{ item.quantity }} </td>
        <td>{{item.price|mul:item.quantity }} $</td>
        <td class="form-inline">
        <form class='ml-2 form-inline' method="post" action="{% url 'remove_one' item.id %}">
            {% csrf_token %}
            <button type="submit" class="btn btn-warning text-white btn-sm form-inline">
              <i class="fa fa-minus" aria-hidden="true"></i>
            </button>
          </form>
        <form class='ml-2 form-inline' method="post" action="{% url 'add_one' item.id %}">
            {% csrf_token %}
            <button type="submit" class="btn btn-warning text-white btn-sm form-inline ">
              <i class="fa fa-plus" aria-hidden="true"></i>
            </button>
          </form>
          <form class='ml-2' method="post" action="{% url 'remove_ticket' item.id %}">
            {% csrf_token %}
            <input name='quantity' type="hidden" value="0">
            <button type="submit" class="btn btn-danger text-white btn-sm form-inline">
              <i class="fa fa-trash" aria-hidden="true"></i>
            </button>
          </form>
        </td>
      </tr>
      {% endfor %}
    </table>
    <hr>
  </div>
  {% if total == 0 %}
  <div class="form-group float-right">
    <button class="btn mr-5" role="button">Checkout</button>
  </div>
  {% else %}
  <div class="form-group float-right">
    <h3 class="float-left ml-4">Total: {{ total }} $ </h3>
    <a href="{% url 'checkout' %}" class="float-right btn btn-success mr-4" role="button">Checkout <i class="fa fa-shopping-cart" aria-hidden="true"></i></a>
  </div>
  {% endif %}
</div>
<div class="mt-5"> </div>
</div>
</div>
</div>
{% else %}
<div class="card mt-5">
  <div class="card-header">
    <h2>Summary</h2>
  </div>
  <div class="card-body">
    <h4>You have nothing in your cart :-(</h4>
  </div>
</div>
{% endif %}
{% endblock %}

