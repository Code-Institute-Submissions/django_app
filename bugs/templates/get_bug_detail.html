{% extends "base.html" %}
{% load crispy_forms_tags %}

{% block form %}

<span class="btn btn-primary float-right">
  <a href="{% url 'upvote_bug' bug.id  %}" class="text-white">Vote {{ bug.upvotes }}</a>
</span>

<h3>{{ bug.title }}</h3>

<div class="card mt-4">
  <div class="card-header">
    <span class="float-left mr-2">
        {% ifequal bug.status "('Waiting', 'Waiting')" %}
        <div class="badge badge-secondary">Wating</div>
        {% endifequal %}
        {% ifequal bug.status "In progress" %}
        <div class="badge badge-warning">In progress</div>
        {% endifequal %}
        {% ifequal bug.status "Completed" %}
        <div class="badge badge-success">Completed</div>
        {% endifequal %}
      </span>
    Opened on:
    <i>{{ bug.created_date }}</i>
    by
    <i>{{ bug.username }}</i>
    <a href="{% url 'edit_bug' bug.id  %}" class='float-right'>Edit</a>
  </div>

  <div class="card-body">

    {{ bug.content }}
  </div>

</div>
</div>
</div>

{% if bug.image %}
<img src="/media/{{bug.image}}" alt="">
{% endif %}

{% for comment in comments %}
<div class="card mt-2">
<div class="card-header">
    <i>{{ comment.created_date }}</i>
    by
    <i>{{ comment.username }}</i>
  </div>
  <div class="card-body">
    {{ comment }}
  </div>

</div>
{% endfor %}

<span class="btn btn-secondary float-right mt-2">
  <a href="{% url 'add_comment_bugs' bug.id  %}" class="text-white"> Add comment </a>
</span>

{% endblock form %}

